<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>清邁慢活時光 | Chiang Mai 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              serif: ['"Playfair Display"', '"Noto Serif TC"', 'serif'],
              sans: ['"Inter"', 'sans-serif'],
            },
            colors: {
              thai: {
                gold: '#C5A059',
                bg: '#FDFCF8',
                clay: '#D4A373',
                dark: '#2D2A26'
              }
            }
          }
        }
      }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;600;700&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
      html { scroll-behavior: smooth; }
      body { background-color: #FDFCF8; }
      .no-scrollbar::-webkit-scrollbar { display: none; }
      .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
    <script type="importmap">
    {
      "imports": {
        "react/": "https://aistudiocdn.com/react@^19.2.1/",
        "react": "https://aistudiocdn.com/react@^19.2.1",
        "framer-motion": "https://aistudiocdn.com/framer-motion@^12.23.25",
        "lucide-react": "https://aistudiocdn.com/lucide-react@^0.556.0",
        "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.1/",
        "react-dom/client": "https://aistudiocdn.com/react-dom@^19.2.1/client"
      }
    }
    </script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module">
      async function loadScript(url) {
        try {
          const res = await fetch(url + '?v=' + Date.now());
          if (!res.ok) throw new Error(`Status ${res.status}`);
          return await res.text();
        } catch (e) {
          console.warn(`Failed to load ${url}: ${e.message}`);
          return null;
        }
      }

      async function init() {
        try {
          // 嘗試多個可能的地點讀取資料檔
          let dataCode = await loadScript('./ItineraryData.ts') || await loadScript('./components/ItineraryData.ts');
          
          if (!dataCode) {
            throw new Error("找不到 ItineraryData.ts，請確認檔案是否存在於根目錄或 components 資料夾中。");
          }

          const dataTranspiled = Babel.transform(dataCode, { 
            presets: ['typescript'], 
            filename: 'ItineraryData.ts' 
          }).code;
          const dataUrl = URL.createObjectURL(new Blob([dataTranspiled], { type: 'application/javascript' }));

          let appCode = await loadScript('./App.tsx');
          if (!appCode) throw new Error("找不到 App.tsx");

          // 取代所有的 Import 路徑
          appCode = appCode.replace(/from\s+['"]\.\/components\/ItineraryData['"]/g, `from "${dataUrl}"`);
          appCode = appCode.replace(/from\s+['"]\.\/ItineraryData['"]/g, `from "${dataUrl}"`);

          const appTranspiled = Babel.transform(appCode, { 
            presets: ['react', 'typescript'], 
            filename: 'App.tsx' 
          }).code;
          const appUrl = URL.createObjectURL(new Blob([appTranspiled], { type: 'application/javascript' }));

          let indexCode = await loadScript('./index.tsx');
          if (!indexCode) throw new Error("找不到 index.tsx");
          
          indexCode = indexCode.replace(/from\s+['"]\.\/App['"]/g, `from "${appUrl}"`);
          const indexTranspiled = Babel.transform(indexCode, { 
            presets: ['react', 'typescript'], 
            filename: 'index.tsx' 
          }).code;
          
          await import(URL.createObjectURL(new Blob([indexTranspiled], { type: 'application/javascript' })));
        } catch (e) {
          console.error(e);
          document.body.innerHTML = `
            <div style="padding:40px; text-align:center; font-family:sans-serif;">
              <h1 style="color:#d32f2f;">載入失敗 (Load Error)</h1>
              <p style="color:#666;">${e.message}</p>
              <p style="font-size:12px; margin-top:20px; color:#999;">請確保 ItineraryData.ts 與 App.tsx 位於 GitHub 專案的正確位置。</p>
            </div>
          `;
        }
      }
      init();
    </script>
  </body>
</html>
